import { Callout, Steps, Tabs } from "nextra/components";
import Link from 'next/link';

# Governance and Conway Era

In the Conway era, the Cardano blockchain is introducing significant governance features on-chain. These enhancements, as described in [CIP-1694](https://github.com/cardano-foundation/CIPs/tree/master/CIP-1694), enable ADA holders
to participate in various on-chain decisions. Key changes include new script purposes, centralized data structures like committees, and new transaction features.

Lucid Evolution now supports various governance actions as defined in CIP-1694. These include delegating votes to DReps, registering as a DRep, and managing stake and vote delegations.

<Callout>This section is under construction üõ†Ô∏è</Callout>

## As an ADA Holder

Being part of the community, you can participate in governance through various voting strategies and delegation options

<Steps>

### Delegation Options

Delegates the voting power of the specified reward address to a given DRep
```typescript
await lucid.newTx()
  .delegate.VoteToDRep(rewardAddress, drep)
```

<Callout>

Delegates both your ADA stake to specified pool and your voting power to a given DRep in one action

```typescript
await lucid.newTx()
  .delegate.VoteToPoolAndDrep(rewardAddress, poolId, drep)
```
</Callout>
---

### Registration and Delegation

Registers a stake address and delegates voting power to a DRep in one action

```typescript
await lucid.newTx()
  .registerAndDelegate.ToDrep(rewardAddress, drep)
```

<Callout>

Registers a stake address, and delegates voting power to a DRep (In this case `AlwaysAbstain`) in one action

```typescript
await lucid.newTx()
  .registerAndDelegate.ToPoolAndDRep(rewardAddress, poolId, {
      __typename: "AlwaysAbstain",
    })
```
</Callout>
---

### Predefined Voting Strategies

<Tabs items={['Always Abstain', 'Always No Confidence']}>
  <Tabs.Tab>
  **Always Abstain**

```typescript
await lucid.newTx()
    .delegate.VoteToDRep(rewardAddress, {
      __typename: "AlwaysAbstain",
    })
```
  </Tabs.Tab>
  <Tabs.Tab>
  **Always No Confidence**

```typescript
await lucid.newTx()
    .delegate.VoteToDRep(rewardAddress, {
      __typename: "AlwaysNoConfidence",
    })
```
  </Tabs.Tab>
</Tabs>


</Steps>

<Callout>
Choosing `AlwaysNoConfidence` or `AlwaysAbstain` requires a DRep object with `__typename` property set to the desired value, as it can be observed in the examples above
</Callout>

## As a DRep

<Steps>
### Register / Deregister DRep

Registers a stake address as a DRep

```typescript
await lucid.newTx()
  .register.DRep(rewardAddress)
```

<Callout>
You need to <Link href="/documentation/deep-dives/register-stake">__register the associated stake address__</Link> firstly to be able to register as a DRep 
</Callout>




---

### Update DRep

Updates the information of a DRep

```typescript
await lucid.newTx()
  .updateDRep(rewardAddress)
```
</Steps>
---

### Deregister DRep
Deregisters your stake address as a DRep
```typescript
await lucid.newTx()
  .deregister.DRep(rewardAddress)
```


## Script-based DReps

Lucid Evolution supports script-based DReps, allowing for programmatic voting behavior

<Steps>
<Tabs items={['Register Script DRep', 'Deregister Script  DRep']}>
  <Tabs.Tab>
```typescript
await lucid
  .newTx()
  .register.DRep(rewardAddress)
  .attach.Script(script)
```

  </Tabs.Tab>
  <Tabs.Tab>
```typescript
await lucid
  .newTx()
  .deregister.DRep(rewardAddress)
```
  </Tabs.Tab>
</Tabs>



</Steps>

## Example

To utilize these methods, you need to initiate the `TxBuilder` configuration by calling `newTx()` after `Lucid` is initialized

```typescript
  // You can define a DRep object
  const drep: DRep = { __typename: "AlwaysAbstain" }; // Example AlwaysAbstain DRep

  // Create and complete the transaction
  const tx = await lucid
    .newTx()
    .delegate.VoteToDRep(rewardAddress, drep)
    .complete();
```
